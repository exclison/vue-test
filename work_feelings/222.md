

关于Qiankun项目集成调试中的趣事

最近在浙江文学馆以及陕西考古博物馆的网站开发中,需要使用Qiankun框架做多项目集成开发。毕竟是开发,在调试过程中难免会遇到一些奇奇怪怪的问题,还找不到问题在哪。这两个网站中就遇到了几个比较难找的问题,也算是比较有趣。

第一个是浙江文学馆的网站,个人中心使用Qiankun框架嵌入,但是有一个模块偶尔会白屏,没有内容,而且问题复现也具有一定的偶然性。现在回想这个问题还是值得反思的,最终排查出造成这个问题的原因是路由不匹配,而造成路由不匹配的原因则是有一个状态控制这个模块进入不同的路由,而父系统与子系统是由两个人分别开发,父系统的开发人员并不清楚子系统的具体业务逻辑,导致路由判断少了一层。这个问题反映出我们在做这种多个项目集成开发时,开发人员的沟通的重要性,以及并不能只专注于自己开发的项目逻辑,同样要对需要集成的其他系统业务有所了解。

另一个则是陕西考古博物馆网站个人中心在正式环境路由跳转后无法正常显示,而开发环境则没有这个问题,这个问题属于Qiankun框架附带的问题,记忆深刻则是因为这个问题已经有其他同事解决过,场景类似但是表现形式各异。而在排查过程中也没有想到这是一个问题,导致排查时间比较久。问题原因则是使用Qiankun框架路由跳转时导致History.state数据结构异常。而这个问题则提醒我们应该及时将开发过程中遇到的疑难杂症分享给其他同事,能够节省一些相同问题的排查时间。